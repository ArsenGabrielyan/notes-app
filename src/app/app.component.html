<div class="notes-container">
  <div class="upper">
    <div class="app-title">
      <h1>Notes</h1>
      <div class="tabs">
        <button [ngClass]="{'active': tab === 'notes'}" (click)="switchTab('notes')"><app-icon iconName="edit_note"></app-icon></button>
        <button [ngClass]="{'active': tab === 'deleted'}" (click)="switchTab('deleted')"><app-icon iconName="folder_delete"></app-icon></button>
      </div>
    </div>
    <form class="form" [formGroup]="frmNotes" (ngSubmit)="addNote()">
      <input type="text" name="title" id="title" class="inputBox" placeholder="Title" formControlName="title">
      <textarea name="note" id="onte" class="noteBox" placeholder="Write Any Note" rows="10" formControlName="note"></textarea>
      <button type="submit" [disabled]="frmNotes.get('title')?.hasError('hasAnyBlankSpaces') && frmNotes.get('note')?.hasError('hasAnyBlankSpaces')">Add Note</button>
    </form>
  </div>
  <div class="lower" *ngIf="tab === 'notes'">
      <div class="note" *ngFor="let nt of notes; let i=index">
        <h2>{{nt.title}}</h2>
        <p>{{nt.note}}</p>
        <div class="buttons">
          <button type="button" (click)="openEditModal(i)" secondSelection><app-icon iconName="edit"></app-icon></button>
          <button type="button" (click)="deleteNote(i)"><app-icon iconName="delete"></app-icon></button>
          <button type="button" (click)="openViewModal(i)"><app-icon iconName="open_in_new"></app-icon></button>
        </div>
      </div>
  </div>
  <div class="lower" *ngIf="tab === 'deleted'">
    <div class="note" *ngFor="let nt of deleted; let i=index">
      <h2>{{nt.title}}</h2>
      <p>{{nt.note}}</p>
      <button class="oneBtn" (click)="deleteForever(i)"><app-icon iconName="delete_forever"></app-icon></button>
    </div>
  </div>
  <div class="modal-container" *ngIf="editMdl || viewMdl"> 
    <div class="edit-modal" *ngIf="editMdl">
      <button type="button" class="closeBtn" (click)="closeEditModal()"><app-icon iconName="close"></app-icon></button>
      <div class="modal-title">
        <h2 class="title">Edit Note</h2>
        <div class="border"></div>
      </div>
      <form [formGroup]="frmEdit" (ngSubmit)="editNote()">
        <input type="text" formControlName="newTitle" [placeholder]="oldTitle">
        <textarea formControlName="newNote" [placeholder]="oldNote" rows="5"></textarea>
        <button type="submit" [disabled]="frmEdit.get('newTitle')?.hasError('hasAnyBlankSpaces') && frmEdit.get('newNote')?.hasError('hasAnyBlankSpaces')">Apply and Close</button>
      </form>
    </div>
    <div class="view-modal" *ngIf="viewMdl">
      <button type="button" class="closeBtn" (click)="closeViewModal()"><app-icon iconName="close"></app-icon></button>
      <h2>{{viewTitle}}</h2>
      <p>{{viewNote}}</p>
    </div>
  </div>
</div>